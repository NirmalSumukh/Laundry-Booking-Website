<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title><%= title || 'My Orders - Laundry Booking' %></title>
  <link rel="stylesheet" href="/styles/main.css" />
  <link rel="stylesheet" href="/styles/dashboard.css" />
</head>
<body>
  <nav class="nav">
    <div class="brand">
      <a href="/" class="brand-link">Laundry Booking</a>
    </div>
    <div class="nav-actions">
      <span class="user-info">Hello, <%= user?.name || 'Customer' %>!</span>
      <a href="/api/auth/logout" class="btn secondary">Logout</a>
    </div>
  </nav>

  <div class="dashboard-container">
    <div class="dashboard-sidebar">
      <div class="sidebar-menu">
        <a href="#new-order" class="menu-item active" data-section="new-order">
          <span class="menu-icon">ðŸ“¦</span>
          New Order
        </a>
        <a href="#my-orders" class="menu-item" data-section="my-orders">
          <span class="menu-icon">ðŸ“‹</span>
          My Orders
        </a>
        <a href="#profile" class="menu-item" data-section="profile">
          <span class="menu-icon">ðŸ‘¤</span>
          Profile
        </a>
      </div>
    </div>

    <div class="dashboard-main">
      <!-- New Order Section -->
      <div class="dashboard-section active" id="new-order">
        <div class="section-header">
          <h2>Create New Order</h2>
          <p>Schedule your laundry pickup with ease</p>
        </div>

        <div class="order-form-container">
          <form id="orderForm" class="order-form">
            <div class="form-grid">
              <div class="form-group">
                <label for="item_type">Clothing Type</label>
                <select id="item_type" required>
                  <option value="">Select type</option>
                  <option value="shirts">Shirts</option>
                  <option value="pants">Pants/Trousers</option>
                  <option value="dresses">Dresses</option>
                  <option value="suits">Suits</option>
                  <option value="bedding">Bedding</option>
                  <option value="other">Other</option>
                </select>
              </div>
              
              <div class="form-group">
                <label for="item_qty">Quantity</label>
                <input type="number" id="item_qty" min="1" value="1" required />
              </div>
              
              <div class="form-group full-width">
                <label for="item_notes">Special Instructions</label>
                <input type="text" id="item_notes" placeholder="e.g., Handle with care, stain on sleeve" />
              </div>
            </div>

            <div class="address-section">
              <h3>Pickup Address</h3>
              <div class="form-grid">
                <div class="form-group full-width">
                  <label for="addr_line1">Address Line 1 *</label>
                  <input type="text" id="addr_line1" required />
                </div>
                
                <div class="form-group full-width">
                  <label for="addr_line2">Address Line 2</label>
                  <input type="text" id="addr_line2" />
                </div>
                
                <div class="form-group">
                  <label for="addr_city">City *</label>
                  <input type="text" id="addr_city" required />
                </div>
                
                <div class="form-group">
                  <label for="addr_state">State *</label>
                  <input type="text" id="addr_state" required />
                </div>
                
                <div class="form-group">
                  <label for="addr_pincode">Pincode *</label>
                  <input type="text" id="addr_pincode" pattern="[0-9]{6}" required />
                </div>
              </div>
            </div>

            <div class="order-options">
              <div class="form-group checkbox-group">
                <label class="checkbox-label">
                  <input type="checkbox" id="high_priority" />
                  <span class="checkmark"></span>
                  High Priority (+â‚¹100)
                </label>
              </div>
              
              <div class="form-group">
                <label for="amount_paise">Total Amount</label>
                <div class="amount-display">
                  <input type="number" id="amount_paise" min="1000" value="49900" required readonly />
                  <span class="amount-text">â‚¹499.00</span>
                </div>
              </div>
            </div>

            <div class="form-group">
              <label for="notes">Additional Notes</label>
              <textarea id="notes" rows="3" placeholder="Any special requests or instructions..."></textarea>
            </div>

            <button type="submit" class="btn primary full-width">Create Order & Pay</button>
          </form>
        </div>
      </div>

      <!-- My Orders Section -->
      <div class="dashboard-section" id="my-orders">
        <div class="section-header">
          <h2>My Orders</h2>
          <p>Track your laundry orders</p>
        </div>
        <div id="customer_orders" class="orders-container">
          <!-- Orders will be loaded here -->
        </div>
      </div>

      <!-- Profile Section -->
      <div class="dashboard-section" id="profile">
        <div class="section-header">
          <h2>Profile Settings</h2>
          <p>Manage your account information</p>
        </div>
        <div class="profile-info">
          <div class="profile-field">
            <label>Name:</label>
            <span><%= user?.name || 'Not provided' %></span>
          </div>
          <div class="profile-field">
            <label>Email:</label>
            <span><%= user?.email || 'Not provided' %></span>
          </div>
          <div class="profile-field">
            <label>Role:</label>
            <span><%= user?.role || 'customer' %></span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="/scripts/main.js"></script>
  <script src="/scripts/notifications.js"></script>
  <script src="/scripts/auth.js"></script>
  <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
  <script src="/scripts/order.js"></script>
  <script src="/scripts/dashboard.js"></script>
</body>
</html>
